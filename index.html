<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKUscale - Stop Guessing, Start Scaling</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .recommended-plan { transform: scale(1.05  ); box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1), 0 0 0 2px #4f46e5; }
    </style>
    <!-- AHORA: Añadimos el SDK de Auth0 -->
    <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header (sin cambios ) -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="/"><img src="/skuscale-logo.svg" alt="SKUscale Logo" class="h-8"></a>
            <div class="flex items-center space-x-4">
                <a href="#pricing" class="text-gray-600 hover:text-indigo-600" data-lang="en">Pricing</a>
                <a href="#pricing" class="text-gray-600 hover:text-indigo-600" data-lang="es" style="display:none;">Precios</a>
                <div>
                    <button id="lang-en" class="font-semibold text-indigo-600">EN</button>
                    <span class="text-gray-300">/</span>
                    <button id="lang-es" class="font-semibold text-gray-400 hover:text-indigo-600">ES</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section (sin cambios en el HTML, solo en la lógica del botón) -->
    <main class="container mx-auto px-6 pt-16 pb-12 md:pt-24 md:pb-20 text-center">
        <h2 class="text-4xl md:text-6xl font-extrabold tracking-tight text-gray-900" data-lang="en">Stop Guessing, <span class="text-indigo-600">Start Scaling.</span></h2>
        <h2 class="text-4xl md:text-6xl font-extrabold tracking-tight text-gray-900" data-lang="es" style="display:none;">Deja de Adivinar, <span class="text-indigo-600">Empieza a Escalar.</span></h2>
        <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-600" data-lang="en">Get your <b>first complete SKU classification for free</b> and discover your most profitable (and unprofitable) products right now.</p>
        <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-600" data-lang="es" style="display:none;">Consigue tu <b>primera clasificación de SKUs completa y gratis</b>, y descubre ahora mismo tus productos más rentables (y los que no lo son).</p>
        <div class="mt-8">
            <button class="login-trigger bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-transform transform hover:scale-105 text-lg" data-lang="en">Get Your Free SKU Classification</button>
            <button class="login-trigger bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 transition-transform transform hover:scale-105 text-lg" data-lang="es" style="display:none;">Consigue tu Clasificación Gratis</button>
        </div>
    </main>

    <!-- Solution Section (sin cambios) -->
    <section class="py-16 md:py-24 bg-white">
        <!-- ... tu código de la sección de solución ... -->
    </section>

    <!-- Pricing Section (sin cambios en el HTML, solo en la lógica del botón) -->
    <section id="pricing" class="py-16 md:py-24">
        <!-- ... tu código de la sección de precios ... -->
    </section>

    <footer class="bg-gray-800 text-white py-8"><div class="container mx-auto px-6 text-center"><p>&copy; 2025 SKUscale. All rights reserved.</p></div></footer>

    <!-- ANTES: <script type="text/javascript" src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script> -->
    <!-- AHORA: El script de Netlify Identity se ha eliminado. Toda la lógica está aquí abajo. -->
    
    <script>
        // --- 1. LANGUAGE SWITCHER (Sin cambios ) ---
        const langEnBtn = document.getElementById('lang-en');
        const langEsBtn = document.getElementById('lang-es');
        const elementsEn = document.querySelectorAll('[data-lang="en"]');
        const elementsEs = document.querySelectorAll('[data-lang="es"]');

        function setLanguage(lang) {
            // ... (tu código de cambio de idioma, que está perfecto, no se toca)
        }
        langEnBtn.addEventListener('click', () => setLanguage('en'));
        langEsBtn.addEventListener('click', () => setLanguage('es'));

        // --- 2. LÓGICA DE AUTENTICACIÓN CON AUTH0 ---
        let auth0Client = null;

        // Configuración del cliente de Auth0.
        // RECUERDA: Sustituye los valores por los de tu aplicación en Auth0.
        const configureClient = async () => {
            try {
                auth0Client = await auth0.createAuth0Client({
                    domain: "https://nml.eu.auth0.com", // <-- CAMBIA ESTO
                    clientId: "721863547670-3jae7d6k3gtmrs5j3bhhbqt5csa2k6ff.apps.googleusercontent.com" // <-- CAMBIA ESTO
                });
            } catch (e) {
                console.error("Error al configurar Auth0:", e);
            }
        };

        // Función que se ejecuta al hacer clic en cualquier botón de login.
        const login = async () => {
            if (!auth0Client) {
                console.error("Auth0 client no está inicializado.");
                return;
            }
            await auth0Client.loginWithRedirect({
                authorizationParams: {
                    // Auth0 redirigirá aquí después del login.
                    // Debe estar en tu lista de "Allowed Callback URLs".
                    redirect_uri: window.location.origin + '/dashboard.html',
                    // Le decimos que use Google directamente.
                    connection: 'google-oauth2' 
                }
            });
        };

        // Asignamos la función de login a TODOS los botones con la clase 'login-trigger'.
        document.querySelectorAll('.login-trigger').forEach(el => {
            el.addEventListener('click', (e) => {
                e.preventDefault();
                login();
            });
        });

        // Esta función se ejecuta cuando la página carga.
        window.onload = async () => {
            await configureClient();

            // Si el usuario ya está autenticado, lo mandamos directo al dashboard.
            const isAuthenticated = await auth0Client.isAuthenticated();
            if (isAuthenticated) {
                window.location.href = '/dashboard.html';
                return;
            }

            // Comprueba si la URL actual es la de redirección de Auth0.
            const query = window.location.search;
            if (query.includes("code=") && query.includes("state=")) {
                // Procesa el login y redirige al dashboard.
                await auth0Client.handleRedirectCallback();
                window.history.replaceState({}, document.title, "/"); // Limpia la URL
                window.location.href = '/dashboard.html';
            }
        };
    </script>
</body>
</html>
